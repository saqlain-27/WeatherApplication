<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Weather Forecast</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <h1><ion-icon name="cloud-sunny-outline"></ion-icon> Weather Forecast</h1>

    <form action="/" method="get" class="search-container">
      <input type="text" name="location" placeholder="Enter a city name" value="<%= location.split(',')[0] %>" required />
      <button type="submit"><ion-icon name="search-outline"></ion-icon> Search</button>
    </form>    

    <% if (locals.error) { %>
      <p class="error-message"><%= error %></p>
    <% } else { %>
      <div class="weather-info">
        <div class="location"><%= location %></div>
        <div class="date"><%= date %></div>

        <div class="temperature"><%= temperature %>Â°C</div>

        <div class="weather-condition"> 
          <ion-icon class="weather-icon" name="<%= iconClass %>"></ion-icon> 
          <span class="condition-text"><%= conditionText %></span>
        </div>

        <div class="details">
          <div class="detail">
            <div class="detail-title">Humidity</div>
            <div class="detail-value"><%= humidity %>%</div>
          </div>
          <div class="detail">
            <div class="detail-title">Wind</div>
            <div class="detail-value"><%= wind %> km/h</div>
          </div>
          <div class="detail">
            <div class="detail-title">Rain Chance</div>
            <div class="detail-value"><%= rainPercent %>%</div>
          </div>
        </div>

        <% if (umbrellaAlert) { %>
          <div id="umbrella-alert" class="umbrella-alert">
            <ion-icon class="umbrella-icon" name="umbrella-outline"></ion-icon>
            <div class="alert-text">Don't forget to carry an umbrella today!</div>
          </div>
        <% } %>
      </div>
    <% } %>
  </div>

  <div class="credit">
    <p>
      Weather data powered by
      <a href="https://www.weatherapi.com/" target="_main" rel="weather api link"
        >WeatherAPI.com</a
      >
    </p>
  </div>

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>
</html>
